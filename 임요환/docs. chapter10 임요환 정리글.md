## 목 객체 사용
- 목 객체를 도입하여 의존성을 끊는 법과 장애물을 넘을 수 있게 도와주는 도구 활용법을 배움

### 테스트 도전 과제
- REST API 호출 같이 통제 밖의 작업과 이 작업에 대한 테스트 속도를 어떻게 처리할 것인지

### 번거로운 동작을 스텁으로 대체
- 스텁 = 테스트 용도로 하드 코딩한 값을 반환하는 구현체
- 의존성 주입(dependency injection) 기법을 사용하여 스텁을 생성자로 주입함

### 테스트를 지원하기 위한 설계 변경
- 설계를 변경하므로 테스트 객체에 대한 의존성은 가능한 깔끔한 방식으로 선언되고 인터페이스에 대한 의존성은 결합도를 느슨하게 할 수 있음

### 스텁에 지능 더하기: 인자 검증
- 만약 위도 경도를 바꿔서 테스트를 해도 스텁은 테스트를 통과하게 되어 버그를 찾기 매우 힘듬
- 스텁에 인자를 검증하는 보호 절차를 추가하여 테스트를 실패 처리함 -> 목과 유사함
- 목 = 의도적으로 흉내 낸 동작을 제공하고 수신한 인자가 모두 정상인지 여부를 검증하는 일을 하는 테스트 구조물

### 목 도구를 사용하여 테스트 단순화
- 스텁을 목으로 변환하기 위해 할 일
    - 테스트에 어떤 인자를 기대하는지 명시하기(스텁 자체에 있는 것과 반대)
    - get() 메서드에 넘겨진 인자들을 잡아서 저장하기
    - get() 메서드에 저장된 인자들이 기대하는 인자들인지 테스트가 완료될 때 검증하는 능력 지원하기
- 모든 테스트 마다 목을 생성하는 것은 과도한 일임 -> 이를 테스트하기 위해 목 도구(Mockito)를 사용하면 됨

### 마지막 하나의 단순화: 주입 도구 소개
- Mockito의 @Mock, @InjectMocks 애노테이션을 사용하여 의존성 주입을 쉽게 할 수 있음

### 목을 올바르게 사용할 때 중요한 것
- 목을 사용한 테스트는 진행하길 원하는 내용을 분명하게 기술해야 함
- 목은 실제 동작을 대신함
- 테스트가 진짜로 목을 사용하는지 프로덕션 코드를 실행하고 있진 않은지 확인해야 함
- 알고있는 테스트 데이터를 사용하는 것이 좀더 나은 경로긴 하나 쉽지 않음
- 실제 클래스의 종단 간 사용성을 보여 주는 적절한 상위테스트(통합테스트)가 있는지 확인해야 함
- 목은 단위 테스트 커버리지의 구멍을 만드므로 통합 테스트를 작성하여 구멍을 막아야 함

### 마치며
- 스텁과 목을 이용하여 라이브 서비스, 파일, 데이터 베이스 등 다른 번거로운 의존성들과 상호작용하는 부분을 쉽게 테스트 할 수 있음